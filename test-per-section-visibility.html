<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Per-Section Visibility - SOP JSON Viewer</title>
    <link rel="stylesheet" href="assets/css/sop-accordion.css">
</head>
<body>
    <h1>Test Per-Section Visibility Feature</h1>

    <h2>Per-Section Visibility Control</h2>
    <div class="sop-json-viewer" data-sop-id="test-per-section" data-default-visibility="hidden">
        <h2 class="sop-title">Test Per-Section Visibility</h2>
        <p class="sop-description">Each section can have its own expanded state defined in JSON.</p>
        <div class="sop-accordion" role="tablist" aria-multiselectable="true">
            <div class="sop-section">
                <button class="sop-section-header" id="header-section-0" aria-controls="content-section-0" aria-expanded="true" role="tab">
                    <span class="sop-section-title">Section 1 - Always Expanded (expanded: true)</span>
                    <span class="sop-toggle-icon" aria-hidden="true">−</span>
                </button>
                <div class="sop-section-content" id="content-section-0" aria-labelledby="header-section-0" role="tabpanel">
                    <div class="sop-content">
                        <p>This section is set to expanded=true in JSON, so it will always be open.</p>
                    </div>
                </div>
            </div>
            <div class="sop-section">
                <button class="sop-section-header" id="header-section-1" aria-controls="content-section-1" aria-expanded="false" role="tab">
                    <span class="sop-section-title">Section 2 - Always Collapsed (expanded: false)</span>
                    <span class="sop-toggle-icon" aria-hidden="true">+</span>
                </button>
                <div class="sop-section-content" id="content-section-1" aria-labelledby="header-section-1" role="tabpanel" hidden>
                    <div class="sop-content">
                        <p>This section is set to expanded=false in JSON, so it will always be closed.</p>
                    </div>
                </div>
            </div>
            <div class="sop-section">
                <button class="sop-section-header" id="header-section-2" aria-controls="content-section-2" aria-expanded="false" role="tab">
                    <span class="sop-section-title">Section 3 - Follows Global Setting (no expanded property)</span>
                    <span class="sop-toggle-icon" aria-hidden="true">+</span>
                </button>
                <div class="sop-section-content" id="content-section-2" aria-labelledby="header-section-2" role="tabpanel" hidden>
                    <div class="sop-content">
                        <p>This section has no expanded property, so it follows the global default_visibility="hidden".</p>
                    </div>
                </div>
            </div>
            <div class="sop-section">
                <button class="sop-section-header" id="header-section-3" aria-controls="content-section-3" aria-expanded="true" role="tab">
                    <span class="sop-section-title">Section 4 - With Subsections</span>
                    <span class="sop-toggle-icon" aria-hidden="true">−</span>
                </button>
                <div class="sop-section-content" id="content-section-3" aria-labelledby="header-section-3" role="tabpanel">
                    <div class="sop-content">
                        <p>This section has subsections with different visibility settings.</p>
                        <div class="sop-subsections">
                            <div class="sop-section">
                                <button class="sop-section-header" id="header-nested-0" aria-controls="content-nested-0" aria-expanded="true" role="button">
                                    <span class="sop-section-title">Subsection 1 - Expanded</span>
                                    <span class="sop-toggle-icon" aria-hidden="true">−</span>
                                </button>
                                <div class="sop-section-content" id="content-nested-0" aria-labelledby="header-nested-0" hidden>
                                    <div class="sop-content">
                                        <p>This subsection is expanded.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="sop-section">
                                <button class="sop-section-header" id="header-nested-1" aria-controls="content-nested-1" aria-expanded="false" role="button">
                                    <span class="sop-section-title">Subsection 2 - Collapsed</span>
                                    <span class="sop-toggle-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="sop-section-content" id="content-nested-1" aria-labelledby="header-nested-1" hidden>
                                    <div class="sop-content">
                                        <p>This subsection is collapsed.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/sop-accordion.js"></script>
</body>
</html>